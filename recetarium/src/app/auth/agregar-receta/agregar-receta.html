<div class="page">
  <header class="page-header">
    <h1>ğŸ³ Agregar Nueva Receta</h1>
    <p>Completa los campos y aÃ±ade tus ingredientes y pasos de preparaciÃ³n.</p>
  </header>

  <main class="formulario">
    <section class="datos-basicos">
      <label>TÃ­tulo</label>
      <input [(ngModel)]="receta.titulo" placeholder="Ej: Ensalada CÃ©sar">

      <label>DescripciÃ³n</label>
      <textarea [(ngModel)]="receta.descripcion" placeholder="Breve descripciÃ³n..."></textarea>

      <label>Tiempo de preparaciÃ³n (min)</label>
      <input type="number" [(ngModel)]="receta.tiempo_preparacion">

      <label>Porciones</label>
      <input type="number" [(ngModel)]="receta.porciones">

      <label>Dificultad</label>
      <select [(ngModel)]="receta.dificultad">
        <option value="FÃ¡cil">FÃ¡cil</option>
        <option value="Media">Media</option>
        <option value="DifÃ­cil">DifÃ­cil</option>
      </select>

      <label>CategorÃ­a</label>
      <select [(ngModel)]="receta.id_categoria">
        <option [value]="c.id" *ngFor="let c of categorias">{{ c.nombre }}</option>
      </select>

      <label>URL de Imagen</label>
      <input [(ngModel)]="receta.imagen" placeholder="https://...">
    </section>

    <section class="ingredientes">
      <h3>ğŸ§‚ Ingredientes</h3>
      <div class="ingrediente-form">
        <input [(ngModel)]="ingredienteActual.nombre" placeholder="Nombre del ingrediente"
               (input)="buscarIngrediente()" autocomplete="off">
        <ul *ngIf="showSugerencias" class="sugerencias">
          <li *ngFor="let s of sugerencias" (click)="seleccionarSugerencia(s)">{{ s.nombre }}</li>
        </ul>
        <input [(ngModel)]="ingredienteActual.cantidad" placeholder="Cantidad">
        <input [(ngModel)]="ingredienteActual.unidad" placeholder="Unidad">
        <input [(ngModel)]="ingredienteActual.nota" placeholder="Nota (opcional)">
        <button (click)="agregarIngrediente()">â• Agregar</button>
      </div>

      <ul class="lista-ingredientes">
        <li *ngFor="let i of receta.ingredientes; let idx = index">
          {{ i.nombre }} - {{ i.cantidad }} {{ i.unidad }}
          <button class="danger" (click)="eliminarIngrediente(idx)">âŒ</button>
        </li>
      </ul>
    </section>

    <section class="pasos">
      <h3>ğŸ‘©â€ğŸ³ Pasos</h3>
      <div class="paso-form">
        <textarea [(ngModel)]="pasoActual.descripcion" placeholder="Describe el paso..."></textarea>
        <button (click)="agregarPaso()">â• Agregar Paso</button>
      </div>

      <ol class="lista-pasos">
        <li *ngFor="let p of receta.pasos; let idx = index">
          {{ p.descripcion }}
          <button class="danger" (click)="eliminarPaso(idx)">âŒ</button>
        </li>
      </ol>
    </section>

    <div class="acciones-finales">
      <button class="guardar" (click)="guardarReceta()">ğŸ’¾ Guardar Receta</button>
      <button class="secundario" (click)="limpiarFormulario()">ğŸ§¹ Limpiar</button>
    </div>
  </main>

  <app-bubble-menu></app-bubble-menu>
</div>
